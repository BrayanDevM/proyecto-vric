<!-- <div class="content">
  <div class="container-fluid">
    <app-breadcrumb></app-breadcrumb>
    <form>
      <div class="row" style="position: relative; z-index: 1;">
        <div class="col-4">
          <div *ngIf="usuario" class="card BDM_fadeInUp">
            <div class="card-body">
              <h4 class="card-title">Editar usuario</h4>
              <div class="row">
                <div class="form-group col-12">
                  <label for="nombre">Nombre completo</label>
                  <input
                    [(ngModel)]="usuario.nombre"
                    type="text"
                    class="form-control"
                    placeholder="Nombre..."
                    name="nombre"
                    required
                  />
                </div>
                <div class="form-group col-12">
                  <label for="documento">Documento</label>
                  <input
                    [(ngModel)]="usuario.documento"
                    type="text"
                    class="form-control"
                    placeholder="No. documento..."
                    name="documento"
                    required
                  />
                </div>
                <div class="form-group col-12">
                  <label for="correo">Correo</label>
                  <input
                    [(ngModel)]="usuario.correo"
                    type="email"
                    class="form-control"
                    placeholder="Correo..."
                    name="correo"
                    required
                  />
                </div>
                <div class="form-group col-12">
                  <label for="telefono">Telefono</label>
                  <input
                    [(ngModel)]="usuario.telefono"
                    type="text"
                    class="form-control"
                    placeholder="Telefono..."
                    name="telefono"
                  />
                </div>
              </div>
              <div class="row">
                <div class="form-group col-6">
                  <label for="rol">Rol</label>
                  <ng-select
                    [items]="roles"
                    bindValue="value"
                    bindLabel="label"
                    [searchable]="false"
                    placeholder="Establecer rol"
                    [(ngModel)]="usuario.rol"
                    name="rol"
                  >
                    <ng-template ng-label-tmp let-item="item">
                      <i [class]="item.icon"></i>
                      {{ item.label }}
                    </ng-template>
                  </ng-select>
                </div>
                <div class="form-group col-6">
                  <label for="contratos">Contratos</label>
                  <ng-select
                    [items]="contratosDisponibles"
                    bindValue="_id"
                    bindLabel="codigo"
                    [searchable]="false"
                    [multiple]="true"
                    placeholder="Seleccionar contrato"
                    [(ngModel)]="usuario.contratos"
                    name="contratos"
                  ></ng-select>
                </div>
                <div class="form-group col-12">
                  <label for="password">Contraseña</label>
                  <div class="input-group">
                    <input
                      [(ngModel)]="usuario.password"
                      placeholder="Contraseña..."
                      class="form-control"
                      name="password"
                    />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 text-right mt-2">
                  <button
                    *ngIf="!actualizando"
                    (click)="actualizarUsuario()"
                    type="button"
                    class="btn btn-success btn-sm"
                  >
                    <i class="fas fa-sync"></i> Actualizar
                  </button>
                  <button
                    *ngIf="actualizando"
                    [disabled]="actualizando"
                    type="button"
                    class="btn btn-success btn-sm disabled"
                  >
                    <span
                      class="spinner-border spinner-border-sm"
                      role="status"
                      aria-hidden="true"
                    ></span>
                    Actualizando
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div> -->
<div class="contrato-detalle" *ngIf="!editMode; else formEdit">
  <form class="form-detalle">
    <div class="actions">
      <button type="button" mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu" xPosition="before">
        <button type="button" (click)="editMode = true" mat-menu-item>
          <mat-icon fontSet="material-icons-two-tone">edit</mat-icon>
          <span>Editar</span>
        </button>
      </mat-menu>
      <button (click)="volver()" matTooltip="Cerrar" mat-icon-button>
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="user-no-image">
      {{ usuario.nombre | primeraLetra }}
    </div>
    <h2 class="form-title">{{ usuario.nombre | nombrePropio }}</h2>
    <div class="badges d-flex flex-row">
      <div
        class="badge-status alert mr-1"
        [ngClass]="{
          'alert-success': usuario.activo,
          'alert-danger': !usuario.activo
        }"
      >
        <div
          class="status-indicator"
          [ngClass]="{
            'bg-success': usuario.activo,
            'bg-danger': !usuario.activo
          }"
        ></div>
        <span class="status-text" *ngIf="usuario.activo">Activo</span>
        <span class="status-text" *ngIf="!usuario.activo">Inactivo</span>
      </div>
    </div>
    <div class="form-field documento">
      <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
        >account_box</mat-icon
      >
      <div class="label">
        {{ usuario.documento }}
      </div>
    </div>
    <div class="form-field correo">
      <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
        >mail</mat-icon
      >
      <div class="label">
        {{ usuario.correo }}
      </div>
    </div>
    <div class="form-field telefono">
      <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
        >local_phone</mat-icon
      >
      <div class="label">
        <span id="telefono">{{ usuario.telefono }}</span>
        <button
          type="button"
          (click)="whatsApp(usuario.telefono)"
          mat-icon-button
          matTooltip="Enviar WhatsApp"
          matTooltipPosition="right"
          class="clipboard-btn ml-2"
        >
          <mat-icon svgIcon="whatsapp"></mat-icon>
        </button>
      </div>
    </div>
    <div class="form-field rol">
      <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
        >verified_user</mat-icon
      >
      <div class="label">
        {{ usuario.rol }}
      </div>
    </div>
    <div class="form-field contratos">
      <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
        >book</mat-icon
      >
      <div class="label">
        <span *ngFor="let contrato of usuario.contratos"
          >{{ contrato.eas }}, {{ contrato.codigo }} <br
        /></span>
      </div>
    </div>
    <div class="form-field creadoEl">
      <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
        >today</mat-icon
      >
      <div class="label">Creado el {{ usuario.creadoEl }}</div>
    </div>
  </form>
</div>
<!--------------------------------------------------------------------------------->
<!-------------------------- TEMPLATE FOR EDIT MODE FORM -------------------------->
<ng-template #formEdit>
  <div class="contrato-detalle">
    <form
      class="form-detalle modo-edicion"
      ngNativeValidate
      [formGroup]="formActualizarUsuario"
      (ngSubmit)="actualizar()"
    >
      <div class="actions">
        <button
          type="button"
          (click)="editMode = false"
          mat-icon-button
          matTooltip="Cancelar"
        >
          <mat-icon fontSet="material-icons-two-tone">cancel</mat-icon>
        </button>
        <button
          (click)="actualizar()"
          type="submit"
          mat-icon-button
          matTooltip="Guardar"
        >
          <mat-icon fontSet="material-icons-two-tone">save</mat-icon>
        </button>
        <button
          type="button"
          (click)="eliminar()"
          mat-icon-button
          matTooltip="Eliminar"
        >
          <mat-icon fontSet="material-icons-two-tone">delete</mat-icon>
        </button>
      </div>
      <div class="user-no-image">
        {{ fv.nombre | primeraLetra }}
      </div>
      <div class="nombre form-field">
        <mat-form-field appearance="outline">
          <mat-label>Nombre completo</mat-label>
          <input
            matInput
            formControlName="nombre"
            name="nombre"
            placeholder="ej. Brayan Devia Machado"
          />
        </mat-form-field>
      </div>
      <div class="activo form-field mt-4">
        <mat-slide-toggle name="activo" formControlName="activo">
          <span *ngIf="fv.activo">Activo</span>
          <span *ngIf="!fv.activo">Inactivo</span>
        </mat-slide-toggle>
      </div>
      <div class="documento form-field">
        <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
          >account_box</mat-icon
        >
        <mat-form-field appearance="outline">
          <mat-label>No. Documento</mat-label>
          <input
            matInput
            formControlName="documento"
            name="documento"
            placeholder="Número de documento..."
          />
        </mat-form-field>
      </div>
      <div class="correo form-field">
        <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
          >email</mat-icon
        >
        <mat-form-field appearance="outline">
          <mat-label>Correo electrónico</mat-label>
          <input
            matInput
            formControlName="correo"
            name="correo"
            placeholder="usuario@dominio.com"
          />
        </mat-form-field>
      </div>
      <div class="form-field telefono">
        <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
          >local_phone</mat-icon
        >
        <mat-form-field appearance="outline">
          <mat-label>telefono asignados</mat-label>
          <input
            matInput
            type="numeric"
            formControlName="telefono"
            name="telefono"
            placeholder="telefono..."
          />
        </mat-form-field>
      </div>
      <div class="form-field rol">
        <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
          >supervisor_account</mat-icon
        >
        <ng-select
          [items]="roles"
          bindValue="value"
          bindLabel="label"
          [searchable]="false"
          placeholder="Establecer rol"
          name="rol"
          formControlName="rol"
        >
          <ng-template ng-label-tmp let-item="item">
            <i [class]="item.icon"></i>
            {{ item.label }}
          </ng-template>
        </ng-select>
      </div>
      <div class="form-field contratos">
        <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
          >book</mat-icon
        >
        <ng-select
          [items]="contratosDisponibles"
          bindValue="_id"
          bindLabel="codigo"
          [searchable]="false"
          [multiple]="true"
          placeholder="Seleccionar contrato"
          name="contratos"
          formControlName="contratos"
        ></ng-select>
      </div>
      <div class="form-field password">
        <mat-icon fontSet="material-icons-two-tone" class="form-field-icon"
          >lock</mat-icon
        >
        <mat-form-field appearance="outline">
          <mat-label>Nueva contraseña</mat-label>
          <input
            matInput
            name="password"
            formControlName="password"
            [type]="hide ? 'password' : 'text'"
          />
          <button
            mat-icon-button
            matSuffix
            (click)="hide = !hide"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide"
          >
            <mat-icon>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </mat-form-field>
      </div>
    </form>
  </div>
</ng-template>
