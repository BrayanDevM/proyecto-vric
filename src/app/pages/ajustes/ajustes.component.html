<div class="page-wrapper bg-blue-grey">
  <div
    class="profile-cover"
    style="background-image: url('./assets/img/settings-cover.jpg');"
  >
    <div class="cover-actions">
      <button mat-stroked-button type="button" class="text-white">
        <mat-icon>photo_camera</mat-icon> Cambiar fondo
      </button>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-xl-3">
        <div class="card card-body border-0 shadow-sm p-0">
          <div class="user-profile">
            <div class="avatar">
              <img src="./assets/img/developer.png" width="100%" alt="" />
            </div>
            <div class="info">
              <div class="name text-dark-1">
                {{ usuario.nombre | nombrePropio }}
              </div>
              <div class="email">{{ usuario.correo }}</div>
            </div>
          </div>
          <div class="text-center p-3 border-top text-dark-1">
            <button mat-stroked-button type="button">
              <mat-icon>insert_photo</mat-icon> Cambiar foto de perfil
            </button>
          </div>
        </div>
      </div>
      <div class="col-xl-9">
        <div class="card card-body border-0 shadow-sm">
          <mat-tab-group animationDuration="0ms" mat-align-tabs="start">
            <mat-tab>
              <ng-template mat-tab-label>
                Tu perfil
              </ng-template>
              <div class="pt-4 pr-3 pb-4 pl-3">
                <div
                  class="tab-content-header d-flex flex-row align-items-center"
                >
                  <div class="icon mr-2">
                    <mat-icon>account_circle</mat-icon>
                  </div>
                  <div class="title">
                    <h4 class="m-0">Tu perfil</h4>
                    <small class="text-muted"
                      >Detalles de tu información personal</small
                    >
                  </div>
                </div>
                <div class="mt-4 mb-4">
                  <mat-divider></mat-divider>
                </div>
                <form
                  [formGroup]="formPerfil"
                  (ngSubmit)="actualizarPerfil()"
                  class="container-fluid"
                >
                  <div class="row">
                    <!--********************** CAMPO NOMBRE **********************-->
                    <div class="col-sm-12 col-md-6 col-xl-5">
                      <div class="form-group">
                        <label for="nombre">Nombre completo</label>
                        <mat-form-field appearance="outline" class="bdm-input">
                          <input
                            matInput
                            [value]="fpv.nombre"
                            formControlName="nombre"
                            name="nombre"
                            placeholder="ej. Brayan"
                          />
                          <mat-icon matPrefix>label</mat-icon>
                          <mat-error *ngIf="fpc.nombre.errors?.required">
                            El nombre es obligatorio
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <!--********************** CAMPO DOCUMENTO **********************-->
                    <div class="col-sm-12 col-md-6 col-xl-3">
                      <div class="form-group">
                        <label for="documento">Documento</label>
                        <mat-form-field appearance="outline" class="bdm-input">
                          <input
                            matInput
                            [value]="fpv.documento"
                            formControlName="documento"
                            name="documento"
                            placeholder="ej. Brayan"
                          />
                          <mat-icon matPrefix>account_box</mat-icon>
                          <mat-error *ngIf="fpc.documento.errors?.required">
                            El documento es obligatorio
                          </mat-error>
                          <mat-error
                            *ngIf="fpc.documento.errors?.documentoInvalido"
                          >
                            Debes introducir un documento valido
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <!--********************** CAMPO TELEFONO **********************-->
                    <div class="col-sm-12 col-md-6 col-xl-3">
                      <div class="form-group">
                        <label for="telefono">Teléfono</label>
                        <mat-form-field appearance="outline" class="bdm-input">
                          <input
                            matInput
                            [value]="fpv.telefono"
                            formControlName="telefono"
                            name="telefono"
                            placeholder="ej. 311 507 1561"
                          />
                          <mat-icon matPrefix>phone</mat-icon>
                          <mat-error *ngIf="fpc.telefono.errors?.required">
                            El telefono es obligatorio
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <!--********************** CAMPO CORREO **********************-->
                    <div class="col-sm-12 col-md-6 col-xl-5">
                      <div class="form-group">
                        <label for="correo">Correo</label>
                        <mat-form-field appearance="outline" class="bdm-input">
                          <input
                            matInput
                            [value]="fpv.correo"
                            [readonly]="usuario.google"
                            formControlName="correo"
                            name="correo"
                            placeholder="ej. 311 507 1561"
                          />
                          <mat-icon matPrefix>mail</mat-icon>
                          <mat-error *ngIf="fpc.correo.errors?.required">
                            El correo es obligatorio
                          </mat-error>
                          <mat-hint *ngIf="usuario.google"
                            >No puedes editar un correo de Google</mat-hint
                          >
                        </mat-form-field>
                      </div>
                    </div>
                    <!--********************** CAMPO ROL **********************-->
                    <div class="col-sm-12 col-md-6 col-xl-3">
                      <div class="form-group">
                        <label for="rol">Rol asignado</label>
                        <mat-form-field appearance="outline" class="bdm-input">
                          <input
                            matInput
                            [value]="fpv.rol"
                            formControlName="rol"
                            name="rol"
                          />
                          <mat-icon matPrefix>verified_user</mat-icon>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 text-right">
                      <button mat-flat-button color="primary" type="submit">
                        Actualizar
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </mat-tab>

            <mat-tab>
              <ng-template mat-tab-label>
                Seguridad
              </ng-template>
              <div class="pt-4 pr-3 pb-4 pl-3">
                <div
                  class="tab-content-header d-flex flex-row align-items-center"
                >
                  <div class="icon mr-2">
                    <mat-icon>security</mat-icon>
                  </div>
                  <div class="title">
                    <h4 class="m-0">Seguridad</h4>
                    <small class="text-muted"
                      >Seguridad y configuración de cuenta</small
                    >
                  </div>
                </div>
                <div class="mt-4 mb-4">
                  <mat-divider></mat-divider>
                </div>
                <form
                  [formGroup]="formPassword"
                  (ngSubmit)="actualizarPassword()"
                  class="container-fluid"
                >
                  <div class="row">
                    <!--********************** CAMPO PASSWORD **********************-->
                    <div class="col-sm-12 col-md-6 col-xl-4">
                      <div class="form-group">
                        <label for="password">Contraseña</label>
                        <mat-form-field appearance="outline" class="bdm-input">
                          <input
                            matInput
                            [type]="verPassword ? 'text' : 'password'"
                            [value]="fpv.nombre"
                            formControlName="password"
                            name="password"
                            autocomplete="off"
                          />
                          <button
                            mat-icon-button
                            matSuffix
                            type="button"
                            (click)="verPassword = !verPassword"
                            [attr.aria-label]="'verPassword password'"
                            [attr.aria-pressed]="verPassword"
                          >
                            <mat-icon>{{
                              verPassword ? 'visibility' : 'visibility_off'
                            }}</mat-icon>
                          </button>
                          <mat-error *ngIf="fsc.password.errors?.required">
                            La contraseña es obligatoria
                          </mat-error>
                          <mat-error *ngIf="fsc.password.errors?.minlength">
                            La contraseña debe tener mínimo 8 caracteres
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <!--********************** CAMPO PASSWORD CONFIRM **********************-->
                    <div class="col-sm-12 col-md-6 col-xl-4">
                      <div class="form-group">
                        <label for="confirmaPassword"
                          >Confirmar contraseña</label
                        >
                        <mat-form-field appearance="outline" class="bdm-input">
                          <input
                            matInput
                            type="password"
                            [value]="fpv.nombre"
                            formControlName="confirmaPassword"
                            name="confirmaPassword"
                            autocomplete="off"
                          />
                          <mat-error
                            *ngIf="fsc.confirmaPassword.errors?.required"
                          >
                            Debes confirmar la contraseña
                          </mat-error>
                          <mat-error
                            *ngIf="
                              fsc.confirmaPassword.errors?.noCoinciden &&
                              fsc.confirmaPassword.dirty
                            "
                          >
                            Las contraseñas no coinciden
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 text-right">
                      <button mat-flat-button color="primary" type="submit">
                        Actualizar
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </mat-tab>

            <mat-tab>
              <ng-template mat-tab-label>
                Notificaciones
              </ng-template>
              <div class="pt-4 pr-3 pb-4 pl-3">
                <div
                  class="tab-content-header d-flex flex-row align-items-center"
                >
                  <div class="icon mr-2">
                    <mat-icon>notifications</mat-icon>
                  </div>
                  <div class="title">
                    <h4 class="m-0">Notificaciones</h4>
                    <small class="text-muted"
                      >Configuración de notificaciones</small
                    >
                  </div>
                </div>
                <div class="mt-4 mb-4">
                  <mat-divider></mat-divider>
                </div>
              </div>
            </mat-tab>
            <mat-tab>
              <ng-template mat-tab-label>
                Tema
              </ng-template>
              <div class="pt-4 pr-3 pb-4 pl-3">
                <div
                  class="tab-content-header d-flex flex-row align-items-center"
                >
                  <div class="icon mr-2">
                    <mat-icon>color_lens</mat-icon>
                  </div>
                  <div class="title">
                    <h4 class="m-0">Tema</h4>
                    <small class="text-muted">Configuración visual</small>
                  </div>
                </div>
                <div class="mt-4 mb-4">
                  <mat-divider></mat-divider>
                </div>
              </div>
            </mat-tab>

            <mat-tab disabled>
              <ng-template mat-tab-label>
                Métodos de pago
              </ng-template>
              <div class="pt-4 pr-3 pb-4 pl-3">
                <div
                  class="tab-content-header d-flex flex-row align-items-center"
                >
                  <div class="icon mr-2">
                    <mat-icon>payment</mat-icon>
                  </div>
                  <div class="title">
                    <h4 class="m-0">Métodos de pago</h4>
                    <small class="text-muted"
                      >Detalles de tus métodos de pago</small
                    >
                  </div>
                </div>
                <div class="mt-4 mb-4">
                  <mat-divider></mat-divider>
                </div>
              </div>
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
    </div>
  </div>
</div>
